<!DOCTYPE HTML>
	<html>
		<head>
			<title>Shop Lift Up Grocery List</title>
			<link href="https://fonts.googleapis.com/css?family=Chelsea+Market&display=swap" rel="stylesheet">
			<link rel="shortcut icon" type="image/png" href="logo.png"/>
			<style>
				h1
				{
					text-align: center;
					font: bold 40pt 'Chelsea Market';
				}
				body
				{
					background-color: #ffbd38;
					font: 18pt Tw Cen MT;
				}
				img
				{
					position: absolute;
					left: 7%;
					bottom: 85%;
					height: 125px;
				}
				input
				{
					padding: 5px;
					background-color: #b3e5fc;
				}
				button
				{
					font: 18pt Tw Cen MT;
					background-color: #94bdff;
				}
				#error
				{
					color: red;
				}
			</style>
			<script>
//basics
				function initialize()
				{
					groceries = [];

					form1 = document.getElementById("controlsIn1");
					form2 = document.getElementById("controlsIn2");
					fields = document.getElementById("typeIn");
					nameBoxForm = document.getElementById("nameForm");
					numBoxLabel = document.getElementById("numLabel");
					buttonText = document.getElementById("action");
					arrowButtons = document.getElementById("arrows");
					submitButton = document.getElementById("mainButton");
					default1 = document.getElementById("addRadio");
					default2 = document.getElementById("deleteRadio");
					errorMsg = document.getElementById("error");
					numBox = document.getElementById("numInBox");
					nameBox = document.getElementById("itemNameBox");

					default1.checked = true;
					default2.checked = true;

					addUI();
				}
				function display()
				{

				}

//ui controls
				function addUI()  //handles what happens to the UI when the user is to add to the list
				{
					form2.style.display = "none";
					nameBoxForm.style.display = "inline";
					arrowButtons.style.display = "none";
					submitButton.style.display = "inline";
					numBoxLabel.innerHTML = "Quantity: ";
					buttonText.innerHTML = "Add";
					errorMsg.innerHTML = "";
				}
				function modifyUI()  //UI when user is to modify list
				{
					form2.style.display = "inline";
					nameBoxForm.style.display = "none";
					numBoxLabel.innerHTML = "Position: ";
					errorMsg.innerHTML = "";
					if (default2.checked)
					{
						deleteUI();
					}
					else
					{
						rearrangeUI();
					}
				}
				function deleteUI() //UI when user is deleting items
				{
					arrowButtons.style.display = "none";
					submitButton.style.display = "inline";
					buttonText.innerHTML = "Delete";
				}
				function rearrangeUI() //UI when rearranging
				{
					arrowButtons.style.display = "inline";
					submitButton.style.display = "none";
				}
				function errorBox(box) //box's state when user enters illegal input
				{
					box.style.borderColor = "red";
					box.style.borderWidth = "5px";
					box.style.backgroundColor = "rgb(255, 131, 131)";
				}
				function normalBox(box) //restore box from error state
				{
					box.style.borderColor = "black";
					box.style.borderWidth = "2px";
					box.style.backgroundColor = "#b3e5fc";
					errorMsg.innerHTML = "";
				}

//button onclicks
				function submitDirector()
				{
					if (verifyNumber(fields.numIn.value))
					{
						if (form1.control1.value == "1") //Add mode button
						{
							//if (typeof verifyName(fields.itemName.value) !== "boolean");
							if (verifyName(fields.itemName.value))
							{
								if (checkDupes(fields.itemName.value, groceries))
								{
									groceries.push(fields.itemName.value);
								}					
							}
						}
					}
				}
				function arrowDirector()
				{

				}
				function reset() //empty list
				{
					if (confirm("Are you sure you want to empty this list?  This cannot be undone."))
					{
						groceries = [];
						display();
					}
				}

//utilities
				function verifyNumber(inputNum) //makes sure number is a positive integer
				{
					if (inputNum*1 < 0 || !Number.isInteger(inputNum*1) || inputNum.length==0)
					{
						switch (true)
						{
							case inputNum*1 < 0: var problem = "positive number";
							break;
							default: var problem = "whole number";
							break;
						}
						if (form1.control1.value == "1")
						{
							var numType = "quantity";
						}
						else
						{
							var numType = "position";
						}
						errorBox(numBox);
						errorMsg.innerHTML = "<b>The " + numType + " has to be a " + problem + "</b>";
						return false;
					}
					normalBox(numBox);
					return true;
				}
				function verifyName(inputString) //replaces delimiter if found, and determine if name is inputted
				{
					if (fields.itemName.value.length == 0)
					{
						errorBox(nameBox);
						errorMsg.innerHTML = "<b>You forgot to enter a name for the item</b>";
						return false;
					}
					return true;
					normalBox(nameBox);
					/*if (inputString.indexOf("`") > -1)
					{
						inputString = inputString.slice(0, inputString.indexOf("`")) + "'" + inputString.slice(inputString.indexOf("`")+1, inputString.length);
						verifyName(inputString);
					}
					else
					{
						return inputString;
					}*/
				}
				function checkDupes(entry, list) //verify that the input doesn't already exist in the grocery list
				{
					var temp = [];
					for (var item of list)
					{
						temp.push(item.toLowerCase());
					}
					if (temp.indexOf(entry.toLowerCase()) > -1)
					{
						return false;
					}
					return true;
				}
			</script>
		</head>
		<body onload = "initialize();">
			<!-- heading -->
			<img src = "logo.png" />
			<h1>Shop Lift Up Grocery List</h1>

			<!-- user interaction -->
			<form id = "controlsIn1">
				</br>
				<!-- choose between adding or modifying -->
				<label>
					<input name = "control1" type = "radio" value = "1" onchange="addUI();" id = "addRadio">
					Add item
				</label>
				<label>
					<input name = "control1" type = "radio" value = "2" onchange="modifyUI();">
					Modify list
				</label>
			</form>

			<form id = "controlsIn2">
				</br>
				<!-- only display when modifying.  options to move items or delete items -->
				<label>
					<input name = "control2" type = "radio" value = "3" onchange="deleteUI();" id = "deleteRadio">
					Delete item
				</label>
				<label>
					<input name = "control2" type = "radio" value = "4" onchange="rearrangeUI();">
					Rearange list
				</label>
				<label>
					<input name = "control2" type = "radio" value = "5" onchange = "rearrangeUI();">
					Change quantities
				</label>
			</form>

			<form id = "typeIn">
				<!-- only displayed when adding.  for recieving the name of the item -->
				<label id = "nameForm">
					</br>
					Item name: 
					<input name = "itemName" type = "text" id = "itemNameBox">
					</br>
				</label>
				</br>
				<!-- for quantity, or position, depending on what the user needs to do -->
				<label>
					<span id = "numLabel"></span>
					<input name = "numIn" type = "number" id = "numInBox">
				</label>
			</form>
			</br>

			<!-- button to submit -->
			<button onclick="submitDirector();" id = "mainButton"><span id = "action"></span></button>
			<span id = "arrows">
				<button onclick="arrorDirector('up');">&#11014</button>
				<button onclick="arrorDirector('down');">&#11015</button>	
			</span>
			<span id = "error"></span>
			</br></br>
			<button onclick = "reset();">Empty list</button>
		</body>
	</html>